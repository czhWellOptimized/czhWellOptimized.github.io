---
layout: post
title: ddia
tags: [database]

---

第五章

<script src="/assets/js/mermaid.min.js"></script>
<div class="mermaid">    
graph LR
    数据复制-->主从复制
    数据复制-->多主节点复制
    数据复制-->无主节点复制
	主从复制--> B(复制滞后问题)
	B-->C(读自己的写)
	B-->D(单调读)
	B-->E(前缀一致读)
	C-->F(事务)
	D-->F
	E-->F
	多主节点复制-->写冲突
	无主节点复制-->节点失效
	节点失效-->读修复
	节点失效-->反熵
	无主节点复制-->写冲突
	写冲突-->LWW
	写冲突-->Happens-before  
</div>

第六章

<script src="/assets/js/mermaid.min.js"></script>
<div class="mermaid">    
graph LR
    数据分区-->分区办法
    数据分区-->二级索引分区
    数据分区-->分区再平衡
	分区办法-->基于关键字区间的分区
    分区办法-->哈希分区
    二级索引分区-->基于文档分区
    二级索引分区-->基于词条分区
    分区再平衡-->动态再平衡
    分区再平衡-->自动与手动再平衡
    动态再平衡-->固定数量分区
    动态再平衡-->动态分区
    动态再平衡-->按节点比例分区
</div>

第七章

<script src="/assets/js/mermaid.min.js"></script>
<div class="mermaid">    
graph LR
    事务-->ACID
    事务-->读-提交
    读-提交-->两个版本
    两个版本-->脏读
    读-提交-->行级锁
    行级锁-->脏写

    事务-->快照级别隔离与可重复读
    快照级别隔离与可重复读-->读倾斜
    读倾斜-->一致性快照
    一致性快照-->MVCC
    MVCC-->脏读
    一致性快照-->写锁
    写锁-->脏写
    
    事务-->更新丢失
    更新丢失-->原子写操作
    更新丢失-->显式加锁
    
    事务-->写倾斜
    事务-->幻读
    写倾斜-->串行化
    幻读-->串行化
    串行化-->严格按照串行顺序执行
    串行化-->两阶段锁定
    串行化-->乐观并发控制技术
    两阶段锁定-->谓词锁
    两阶段锁定-->索引区间锁
    乐观并发控制技术-->可串行化的快照隔离
    可串行化的快照隔离-->基于过期的条件做决定
    基于过期的条件做决定-->检测是否读取了过期的MVCC对象
    基于过期的条件做决定-->检测写是否影响了之前的读
</div>

